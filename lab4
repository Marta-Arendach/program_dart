// –ö–ª–∞—Å –∑ –¥–∞–Ω–∏–º–∏ –ø—Ä–æ –º–∞—Ä—à—Ä—É—Ç
class Marshrut {
  int hour;
  int passengers;
  String comment;

  Marshrut(this.hour, this.passengers, this.comment);

  // –ì–µ—Ç–µ—Ä–∏ —ñ —Å–µ—Ç–µ—Ä–∏
  int get getHour => hour;
  int get getPassengers => passengers;
  String get getComment => comment;

  set setHour(int h) => hour = h;
  set setPassengers(int p) => passengers = p;
  set setComment(String c) => comment = c;

  @override
  String toString() =>
      '–ì–æ–¥–∏–Ω–∞: $hour, –ø–∞—Å–∞–∂–∏—Ä—ñ–≤: $passengers, –∫–æ–º–µ–Ω—Ç–∞—Ä: $comment';
}

// üîπ Generic-–∫–ª–∞—Å, —è–∫–∏–π –º–æ–∂–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –±—É–¥—å-—è–∫—ñ –æ–±‚Äô—î–∫—Ç–∏
class Collection<T> {
  List<T> items = [];

  void addItem(T item) => items.add(item);

  // Generic-–º–µ—Ç–æ–¥ 1 ‚Äî –≤–∏–≤—ñ–¥ —É—Å—ñ—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
  void showAll<U>(U Function(T) converter) {
    for (var item in items) {
      print(converter(item));
    }
  }

  // Generic-–º–µ—Ç–æ–¥ 2 ‚Äî –ø–æ—à—É–∫ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞ –∑–∞ –∫—Ä–∏—Ç–µ—Ä—ñ—î–º
  T findMin<U extends Comparable>(U Function(T) selector) {
    if (items.isEmpty) throw Exception('–ö–æ–ª–µ–∫—Ü—ñ—è –ø–æ—Ä–æ–∂–Ω—è');
    T minItem = items.first;
    U minValue = selector(minItem);
    for (var item in items) {
      if (selector(item).compareTo(minValue) < 0) {
        minItem = item;
        minValue = selector(item);
      }
    }
    return minItem;
  }

  // Generic-–º–µ—Ç–æ–¥ 3 ‚Äî –ø—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ —Å—É–º–∏ —á–∏—Å–ª–æ–≤–æ–≥–æ –ø–æ–ª—è
  num sumBy<U extends num>(U Function(T) selector) {
    num sum = 0;
    for (var item in items) {
      sum += selector(item);
    }
    return sum;
  }
}

// üîπ –ö–ª–∞—Å —Ç—Ä–∞–º–≤–∞–π–Ω–æ—ó –∑—É–ø–∏–Ω–∫–∏
class TramStop {
  String name;
  List<int> routes;
  Collection<Marshrut> marshruts; // –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è generic-–∫–ª–∞—Å—É

  TramStop(this.name, this.routes, this.marshruts);

  // –û—Å–Ω–æ–≤–Ω—ñ –º–µ—Ç–æ–¥–∏ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º generic-—Ñ—É–Ω–∫—Ü—ñ–π
  int totalPassengers() => marshruts.sumBy((m) => m.passengers).toInt();

  int hourWithMinPassengers() => marshruts.findMin((m) => m.passengers).hour;

  String longestComment() =>
      marshruts.findMin((m) => -m.comment.length).comment; // –º—ñ–Ω—É—Å –¥–ª—è "max"

  void showResults() {
    print('–ó—É–ø–∏–Ω–∫–∞: $name');
    print('–ú–∞—Ä—à—Ä—É—Ç–∏: ${routes.join(", ")}');
    print('–£—Å—ñ –¥–∞–Ω—ñ:');
    marshruts.showAll((m) => m.toString());
    print('–ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–∞—Å–∞–∂–∏—Ä—ñ–≤: ${totalPassengers()}');
    print('–ì–æ–¥–∏–Ω–∞ –∑ –Ω–∞–π–º–µ–Ω—à–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é –ø–∞—Å–∞–∂–∏—Ä—ñ–≤: ${hourWithMinPassengers()}');
    print('–ù–∞–π–¥–æ–≤—à–∏–π –∫–æ–º–µ–Ω—Ç–∞—Ä: "${longestComment()}"');
  }
}

void main() {
  // –°—Ç–≤–æ—Ä–µ–Ω–Ω—è generic-–∫–æ–ª–µ–∫—Ü—ñ—ó
  var marshrutCollection = Collection<Marshrut>();
  marshrutCollection.addItem(Marshrut(8, 30, '–†–∞–Ω–∫–æ–≤–∏–π –Ω–∞–ø–ª–∏–≤'));
  marshrutCollection.addItem(Marshrut(10, 15, '–ú–∞–ª–æ –ª—é–¥–µ–π'));
  marshrutCollection.addItem(Marshrut(14, 22, '–ü–æ–º—ñ—Ä–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–∞—Å–∞–∂–∏—Ä—ñ–≤'));
  marshrutCollection.addItem(Marshrut(18, 40, '–í–µ—á—ñ—Ä–Ω—ñ–π –ø—ñ–∫'));

  TramStop stop = TramStop('–í–æ–∫–∑–∞–ª—å–Ω–∞', [1, 3, 5], marshrutCollection);
  stop.showResults();
}
